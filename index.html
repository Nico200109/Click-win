<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Click&Win</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="style.css">
</head>

<body>

<h1>Click&Win</h1>
<p class="subtitle">Le prix baisse. Le plus rapide gagne.</p>

<div class="container">
  <div class="card" id="slot1"></div>
  <div class="card" id="slot2"></div>
</div>

<script>
const items = [
  {name:"iPhone 14", desc:"Smartphone dernière génération"},
  {name:"Week-end Disneyland", desc:"2 jours pour 2 personnes"},
  {name:"TV 4K", desc:"Télévision 65 pouces"},
  {name:"Console de jeux", desc:"Console nouvelle génération"}
];

function start(card, index) {
  let price = 100;
  let viewers = Math.floor(Math.random() * 30) + 20;
  let item = items[index % items.length];

  card.innerHTML = `
    <h2>${item.name}</h2>
    <p>${item.desc}</p>
    <div class="viewers">${viewers} personnes regardent cet objet</div>
    <div class="price">${price} €</div>
    <button>Bloquer le prix</button>
  `;

  let priceEl = card.querySelector(".price");
  let btn = card.querySelector("button");

  let timer = setInterval(() => {
    price--;
    priceEl.textContent = price + " €";

    if (price <= 10) {
      clearInterval(timer);
      next(card, index + 1);
    }
  }, 300);

  btn.onclick = () => {
    clearInterval(timer);
    lockPrice(card, price, index);
  };
}

function lockPrice(card, price, index) {
  let payTime = 10;

  card.innerHTML = `
    <h2>Prix bloqué ✅</h2>
    <div class="locked-price">${price} €</div>
    <p>Temps restant pour payer</p>
    <div class="count">${payTime}</div>
  `;

  let payTimer = setInterval(() => {
    payTime--;
    card.querySelector(".count").textContent = payTime;

    if (payTime === 0) {
      clearInterval(payTimer);
      next(card, index + 1);
    }
  }, 1000);
}

function next(card, nextIndex) {
  let t = 5;
  card.innerHTML = `
    <p>Prochain objet dans</p>
    <div class="count">${t}</div>
  `;

  let wait = setInterval(() => {
    t--;
    card.querySelector(".count").textContent = t;

    if (t === 0) {
      clearInterval(wait);
      start(card, nextIndex);
    }
  }, 1000);
}

start(document.getElementById("slot1"), 0);
start(document.getElementById("slot2"), 1);
</script>

</body>
</html>
